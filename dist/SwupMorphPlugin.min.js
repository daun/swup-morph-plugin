(function e(t,r){if(typeof exports==="object"&&typeof module==="object")module.exports=r();else if(typeof define==="function"&&define.amd)define([],r);else if(typeof exports==="object")exports["SwupMorphPlugin"]=r();else t["SwupMorphPlugin"]=r()})(window,function(){return function(e){var t={};function r(n){if(t[n]){return t[n].exports}var i=t[n]={i:n,l:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};r.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};r.t=function(e,t){if(t&1)e=r(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=0)}([function(e,t,r){"use strict";var n=r(1);var i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}e.exports=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=r(2);var u=l(a);var o=r(3);var f=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var v=function(e){d(t,e);function t(e){c(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.name="SwupMorphPlugin";var i={containers:[],updateCallbacks:[]};r.options=n({},i,e);r.contentReplacedHandler=r.morphContainers.bind(r);return r}i(t,[{key:"mount",value:function e(){this.validateContainers();this.swup.on("contentReplaced",this.contentReplacedHandler)}},{key:"unmount",value:function e(){this.swup.off("contentReplaced",this.contentReplacedHandler)}},{key:"validateContainers",value:function e(){var t=this;this.swup.options.containers.forEach(function(e){if(t.options.containers.includes(e)){throw new Error("[swup-morph-plugin] Please remove '"+e+"' from the swup main options to let morph plugin take over.")}})}},{key:"getContainers",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document;return this.options.containers.map(function(e){var r=t.querySelector(e);return{element:r,selector:e}})}},{key:"getNewContainers",value:function e(){var t=this.getNewDocument();return this.getContainers(t)}},{key:"getNewDocument",value:function e(){var t=this.swup.cache.getCurrentPage().originalContent;var r=document.createElement("div");r.innerHTML=t;return r}},{key:"morphContainers",value:function e(){var t=this.getContainers();var r=this.getNewContainers();var n=this.options.updateCallbacks||[];t.forEach(function(e,t){var i=e.element;var a=r[t].element;if(i&&a){(0,f.default)(i,a,n)}})}}]);return t}(u.default);t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){i(this,e);this.isSwupPlugin=true}n(e,[{key:"mount",value:function e(){}},{key:"unmount",value:function e(){}},{key:"_beforeMount",value:function e(){}},{key:"_afterUnmount",value:function e(){}}]);return e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.shouldMorphCallbacks=t.isTextInput=t.isMutableElement=undefined;var n=r(4);var i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++){r[t]=e[t]}return r}else{return Array.from(e)}}var o={INPUT:true,TEXTAREA:true,SELECT:true};var f={INPUT:true,TEXTAREA:true,OPTION:true};var l={"datetime-local":true,"select-multiple":true,"select-one":true,color:true,date:true,datetime:true,email:true,month:true,number:true,password:true,range:true,search:true,tel:true,text:true,textarea:true,time:true,url:true,week:true};var c="data-morph-persist";var s=t.isMutableElement=function e(t){return f[t.tagName]};var d=t.isTextInput=function e(t){return o[t.tagName]&&l[t.type]};var v=function e(t,r){if(!s(t)&&t.isEqualNode(r))return false;return true};var p=function e(t,r){var n=t.closest("["+c+"]");if(!n&&d(t)&&t===document.activeElement){var i={value:true};Array.from(r.attributes).forEach(function(e){if(!i[e.name])t.setAttribute(e.name,e.value)});return false}return!n};var m=t.shouldMorphCallbacks=[v,p];var h=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var i=n.map(function(e){return typeof e==="function"?e(t,r):true});return!i.includes(false)};var b=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var a=[].concat(m,u(n));(0,i.default)(t,r,{onBeforeElUpdated:function e(t,r){return h(t,r,a)}})};t.default=b},function(e,t,r){"use strict";r.r(t);var n=11;function i(e,t){var r=t.attributes;var i;var a;var u;var o;var f;if(t.nodeType===n||e.nodeType===n){return}for(var l=r.length-1;l>=0;l--){i=r[l];a=i.name;u=i.namespaceURI;o=i.value;if(u){a=i.localName||a;f=e.getAttributeNS(u,a);if(f!==o){if(i.prefix==="xmlns"){a=i.name}e.setAttributeNS(u,a,o)}}else{f=e.getAttribute(a);if(f!==o){e.setAttribute(a,o)}}}var c=e.attributes;for(var s=c.length-1;s>=0;s--){i=c[s];a=i.name;u=i.namespaceURI;if(u){a=i.localName||a;if(!t.hasAttributeNS(u,a)){e.removeAttributeNS(u,a)}}else{if(!t.hasAttribute(a)){e.removeAttribute(a)}}}}var a;var u="http://www.w3.org/1999/xhtml";var o=typeof document==="undefined"?undefined:document;var f=!!o&&"content"in o.createElement("template");var l=!!o&&o.createRange&&"createContextualFragment"in o.createRange();function c(e){var t=o.createElement("template");t.innerHTML=e;return t.content.childNodes[0]}function s(e){if(!a){a=o.createRange();a.selectNode(o.body)}var t=a.createContextualFragment(e);return t.childNodes[0]}function d(e){var t=o.createElement("body");t.innerHTML=e;return t.childNodes[0]}function v(e){e=e.trim();if(f){return c(e)}else if(l){return s(e)}return d(e)}function p(e,t){var r=e.nodeName;var n=t.nodeName;var i,a;if(r===n){return true}i=r.charCodeAt(0);a=n.charCodeAt(0);if(i<=90&&a>=97){return r===n.toUpperCase()}else if(a<=90&&i>=97){return n===r.toUpperCase()}else{return false}}function m(e,t){return!t||t===u?o.createElement(e):o.createElementNS(t,e)}function h(e,t){var r=e.firstChild;while(r){var n=r.nextSibling;t.appendChild(r);r=n}return t}function b(e,t,r){if(e[r]!==t[r]){e[r]=t[r];if(e[r]){e.setAttribute(r,"")}else{e.removeAttribute(r)}}}var y={OPTION:function(e,t){var r=e.parentNode;if(r){var n=r.nodeName.toUpperCase();if(n==="OPTGROUP"){r=r.parentNode;n=r&&r.nodeName.toUpperCase()}if(n==="SELECT"&&!r.hasAttribute("multiple")){if(e.hasAttribute("selected")&&!t.selected){e.setAttribute("selected","selected");e.removeAttribute("selected")}r.selectedIndex=-1}}b(e,t,"selected")},INPUT:function(e,t){b(e,t,"checked");b(e,t,"disabled");if(e.value!==t.value){e.value=t.value}if(!t.hasAttribute("value")){e.removeAttribute("value")}},TEXTAREA:function(e,t){var r=t.value;if(e.value!==r){e.value=r}var n=e.firstChild;if(n){var i=n.nodeValue;if(i==r||!r&&i==e.placeholder){return}n.nodeValue=r}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){var r=-1;var n=0;var i=e.firstChild;var a;var u;while(i){u=i.nodeName&&i.nodeName.toUpperCase();if(u==="OPTGROUP"){a=i;i=a.firstChild}else{if(u==="OPTION"){if(i.hasAttribute("selected")){r=n;break}n++}i=i.nextSibling;if(!i&&a){i=a.nextSibling;a=null}}}e.selectedIndex=r}}};var g=1;var N=11;var w=3;var C=8;function T(){}function A(e){if(e){return e.getAttribute&&e.getAttribute("id")||e.id}}function E(e){return function t(r,n,i){if(!i){i={}}if(typeof n==="string"){if(r.nodeName==="#document"||r.nodeName==="HTML"||r.nodeName==="BODY"){var a=n;n=o.createElement("html");n.innerHTML=a}else{n=v(n)}}var u=i.getNodeKey||A;var f=i.onBeforeNodeAdded||T;var l=i.onNodeAdded||T;var c=i.onBeforeElUpdated||T;var s=i.onElUpdated||T;var d=i.onBeforeNodeDiscarded||T;var b=i.onNodeDiscarded||T;var E=i.onBeforeElChildrenUpdated||T;var O=i.childrenOnly===true;var S=Object.create(null);var x=[];function P(e){x.push(e)}function _(e,t){if(e.nodeType===g){var r=e.firstChild;while(r){var n=undefined;if(t&&(n=u(r))){P(n)}else{b(r);if(r.firstChild){_(r,t)}}r=r.nextSibling}}}function j(e,t,r){if(d(e)===false){return}if(t){t.removeChild(e)}b(e);_(e,r)}function M(e){if(e.nodeType===g||e.nodeType===N){var t=e.firstChild;while(t){var r=u(t);if(r){S[r]=t}M(t);t=t.nextSibling}}}M(r);function k(e){l(e);var t=e.firstChild;while(t){var r=t.nextSibling;var n=u(t);if(n){var i=S[n];if(i&&p(t,i)){t.parentNode.replaceChild(i,t);U(i,t)}else{k(t)}}else{k(t)}t=r}}function R(e,t,r){while(t){var n=t.nextSibling;if(r=u(t)){P(r)}else{j(t,e,true)}t=n}}function U(t,r,n){var i=u(r);if(i){delete S[i]}if(!n){if(c(t,r)===false){return}e(t,r);s(t);if(E(t,r)===false){return}}if(t.nodeName!=="TEXTAREA"){I(t,r)}else{y.TEXTAREA(t,r)}}function I(e,t){var r=t.firstChild;var n=e.firstChild;var i;var a;var l;var c;var s;e:while(r){c=r.nextSibling;i=u(r);while(n){l=n.nextSibling;if(r.isSameNode&&r.isSameNode(n)){r=c;n=l;continue e}a=u(n);var d=n.nodeType;var v=undefined;if(d===r.nodeType){if(d===g){if(i){if(i!==a){if(s=S[i]){if(l===s){v=false}else{e.insertBefore(s,n);if(a){P(a)}else{j(n,e,true)}n=s}}else{v=false}}}else if(a){v=false}v=v!==false&&p(n,r);if(v){U(n,r)}}else if(d===w||d==C){v=true;if(n.nodeValue!==r.nodeValue){n.nodeValue=r.nodeValue}}}if(v){r=c;n=l;continue e}if(a){P(a)}else{j(n,e,true)}n=l}if(i&&(s=S[i])&&p(s,r)){e.appendChild(s);U(s,r)}else{var m=f(r);if(m!==false){if(m){r=m}if(r.actualize){r=r.actualize(e.ownerDocument||o)}e.appendChild(r);k(r)}}r=c;n=l}R(e,n,a);var h=y[e.nodeName];if(h){h(e,t)}}var V=r;var H=V.nodeType;var L=n.nodeType;if(!O){if(H===g){if(L===g){if(!p(r,n)){b(r);V=h(r,m(n.nodeName,n.namespaceURI))}}else{V=n}}else if(H===w||H===C){if(L===H){if(V.nodeValue!==n.nodeValue){V.nodeValue=n.nodeValue}return V}else{V=n}}}if(V===n){b(r)}else{if(n.isSameNode&&n.isSameNode(V)){return}U(V,n,O);if(x){for(var B=0,D=x.length;B<D;B++){var X=S[x[B]];if(X){j(X,X.parentNode,false)}}}}if(!O&&V!==r&&r.parentNode){if(V.actualize){V=V.actualize(r.ownerDocument||o)}r.parentNode.replaceChild(V,r)}return V}}var O=E(i);t["default"]=O}])});